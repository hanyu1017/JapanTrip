# 🎌 UI 升級指南

本指南將幫助你升級到增強的日式風格 UI，包含圖片上傳、視覺化路線和改進的時間軸設計。

## ✨ 新功能

### 1. 📸 圖片上傳功能
- 每個行程項目可以上傳自訂圖片
- 支援拖放上傳和預覽
- 圖片以 base64 格式存儲在資料庫中

### 2. 🗺️ 視覺化路線展示
- 自動生成當日路線圖
- 清晰的地點序號和時間標記
- 箭頭連接顯示移動順序

### 3. ⏰ 增強的時間軸設計
- 更大、更清晰的時間標記
- 漸變色時間軸連接線
- 改進的交互動畫效果

### 4. 🎨 專業日式美學
- 日式配色方案（茶褐色、櫻花粉、金色）
- 和風圖案和裝飾元素
- 日文標籤和術語（可選）
- 毛玻璃效果和漸變背景

## 🚀 升級步驟

### 步驟 1：更新後端（已完成）

後端更改已經提交，包括：
- ✅ 資料庫 Schema 添加 `image_url` 欄位
- ✅ API 端點支援圖片上傳
- ✅ 增加 body parser 限制以支援大圖片

### 步驟 2：安裝前端依賴

確保你有最新的依賴：

```bash
cd client
npm install lucide-react axios
```

### 步驟 3：獲取升級的前端代碼

由於前端代碼很長（約3000行），請從以下來源獲取：

#### 選項 A：從 Git 獲取（推薦）

```bash
# 拉取最新代碼
git pull origin claude/travel-itinerary-app-019iL5YqS6xZHfNHECBgfy7w

# 如果有衝突，使用
git checkout client/src/App.jsx
```

#### 選項 B：手動下載

1. 前往 GitHub repository
2. 導航到 `client/src/App.jsx`
3. 複製內容並替換本地文件

### 步驟 4：更新資料庫

如果你已經有現有資料，需要添加 `image_url` 欄位：

```bash
# 重啟伺服器會自動添加欄位
cd server
npm start
```

或手動執行 SQL：

```sql
ALTER TABLE itinerary_items ADD COLUMN IF NOT EXISTS image_url TEXT;
```

### 步驟 5：測試應用

```bash
# 啟動開發伺服器
npm run dev
```

訪問 http://localhost:5173 查看升級後的應用！

## 🎨 設計特色

### 配色方案

- **主色調**：`#8b6f47` (茶褐色)
- **強調色**：`#c44569` (櫻花粉紅)
- **輔助色**：`#f6b93b` (金黃色)
- **背景色**：`#f5f1e8` to `#e8dfd6` (米色漸變)
- **文字色**：`#5d4037` (深褐色)

### 日式設計元素

1. **漸變背景** - 溫暖的米色到淺褐色
2. **邊框裝飾** - 轉角邊框模擬和風畫框
3. **毛玻璃效果** - backdrop-blur 營造層次感
4. **圓角設計** - 大圓角（rounded-2xl）柔和視覺
5. **陰影層次** - 多層陰影增加深度

## 📸 圖片上傳使用方法

### 上傳圖片

1. 點擊任何行程卡片進入編輯模式
2. 在編輯表單中，你會看到圖片上傳區域
3. 點擊"画像を選択"或拖放圖片
4. 預覽後點擊"保存"

### 支援的格式

- JPG/JPEG
- PNG
- WebP
- GIF

### 圖片大小建議

- 推薦：800x600 px
- 最大：10MB（後端限制）
- 比例：16:9 或 4:3

## 🗺️ 路線視覺化

路線視覺化會自動顯示當日所有有地點資訊的行程項目：

- 序號圓圈顯示順序
- 箭頭連接表示移動
- 時間標記幫助規劃
- 可水平滾動查看完整路線

## 🐛 故障排除

### 問題 1：圖片上傳失敗

**錯誤**：`Payload Too Large`

**解決**：
- 確保後端已更新（`bodyParser` limit 增加到 10mb）
- 壓縮圖片到合理大小

### 問題 2：樣式不正常

**解決**：
```bash
# 清除 Vite 快取
rm -rf client/node_modules/.vite
cd client && npm run dev
```

### 問題 3：資料庫錯誤

**錯誤**：`column "image_url" does not exist`

**解決**：
```bash
# 重啟伺服器會自動添加欄位
cd server
npm start
```

## 📱 響應式設計

新 UI 完全響應式：

- **手機** (< 640px)：單欄佈局，底部導航
- **平板** (640-1024px)：優化的卡片尺寸
- **桌面** (> 1024px)：最大寬度 2xl，居中顯示

## 🎭 動畫效果

增強的動畫包括：

- **hover 效果**：卡片放大、陰影增強
- **點擊反饋**：按鈕縮放動畫
- **頁面轉場**：淡入效果
- **時間軸**：漸變線條動畫

## 💡 自定義建議

### 更改配色

在 `App.jsx` 中搜尋並替換顏色代碼：

```jsx
// 主色調
'bg-[#8b6f47]' → 'bg-[YOUR_COLOR]'

// 強調色
'bg-[#c44569]' → 'bg-[YOUR_COLOR]'
```

### 調整時間軸寬度

```jsx
// 找到這一行
<div className="absolute left-[23px] ...">

// 調整數值
<div className="absolute left-[30px] ...">
```

## 📚 相關文件

- [README.md](./README.md) - 完整專案說明
- [DEPLOY.md](./DEPLOY.md) - 部署指南
- [QUICKSTART.md](./QUICKSTART.md) - 快速開始

## 🤝 需要幫助？

如有問題，請在 GitHub Issues 中提出！

---

**享受你的日式風格旅行規劃應用！** 🎌✨
